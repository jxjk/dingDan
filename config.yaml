# 数控车床多订单宏变量管理与生产任务调度系统配置文件

system:
  name: "订单管理助手"
  version: "1.0.0"
  environment: "production"
  language: "zh_CN"

logging:
  level: "INFO"
  file_path: "logs/system.log"
  max_size: "10MB"
  backup_count: 5
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

database:
  sqlite_path: "data/production.db"
  backup_interval: 3600

automation:
  retry_attempts: 3
  retry_delay: 2.0
  timeout: 30.0
  max_workers: 4

file_monitoring:
  onoff_file: "C:/macro/onoff.txt"
  macro_file: "C:/macro/macro.txt"
  scan_interval: 1.0

dnc_system:
  window_title: "DNC控制系统 V3.2"
  process_name: "DNCApp.exe"
  class_name: "WindowsForms10.Window.8.app.0.141b42a_r7_ad1"
  timeout: 30

  controls:
    main_input:
      - method: "auto_id"
        value: "txtModelInput"
      - method: "name"
        value: "型号输入框"
    submit_button:
      - method: "auto_id"
        value: "btnSubmit"
      - method: "name"
        value: "确认提交"

browser_systems:
  daily_report:
    url: "http://192.168.1.100/dailyreport"
    instruction_input:
      - selector: "css"
        value: "#instruction_id"
      - selector: "name"
        value: "order_number"
    submit_button:
      - selector: "css"
        value: "button[type='submit']"

  inspection_system:
    url: "http://192.168.1.100/inspection"
    instruction_input:
      - selector: "id"
        value: "ins_order_no"
      - selector: "name"
        value: "ins_order_no"

machines:
  CNC-01:
    material: "S45C"
    capabilities: ["turning", "facing"]
    ip_address: "127.0.0.1"
    port: 8193
  CNC-02:
    material: "AL6061"
    capabilities: ["turning", "threading"]
    ip_address: "127.0.0.1"
    port: 8194
  CNC-03:
    material: "S45C"
    capabilities: ["turning", "drilling"]
    ip_address: "127.0.0.1"
    port: 8195
  CNC-04:
    material: "SS304"
    capabilities: ["turning", "threading"]
    ip_address: "192.168.1.104"
    port: 8193

machine_default_materials:
  CNC-01: "S45C"
  CNC-02: "AL6061"
  CNC-03: "S45C"
  CNC-04: "SS304"

sample_tasks:
  - task_id: "TASK_20241021_001_INS001"
    instruction_id: "INS001"
    product_model: "AX-100"
    material_spec: "S45C"
    order_quantity: 50
    priority: "Normal"
    estimated_duration: 120
    program_available: true
  - task_id: "TASK_20241021_002_INS002"
    instruction_id: "INS002"
    product_model: "BX-200"
    material_spec: "AL6061"
    order_quantity: 30
    priority: "High"
    estimated_duration: 90
    program_available: true

ui:
  theme: "dark"
  auto_save_interval: 300
  refresh_interval: 5000

material_mapping:
  csv_path: "config/material_mapping.csv"
  validation:
    qr_text:
      required: true
      unique: true
    std_material_code:
      required: true
    material_type:
      required: true
      enum: ["STEEL", "ALUMINUM", "STAINLESS_STEEL", "COPPER"]

backup:
  enabled: true
  frequency: "daily"
  retention_days: 30
  paths:
    tasks: "backup/tasks_{timestamp}.json"
    config: "backup/config_{timestamp}.yaml"
    database: "backup/production_{timestamp}.db"

performance:
  ui_automation_timeout: 5
  file_monitoring_timeout: 1
  task_scheduling_timeout: 2
  material_check_timeout: 0.1

# 机床状态映射配置
machine_status_mapping:
  # CNC模拟器状态到系统内部状态的映射
  cnc_simulator:
    OFF: "OFF"
    IDLE: "IDLE"
    RUNNING: "RUNNING"
    ALARM: "ERROR"
    STOPPED: "STOPPED"
    PAUSED: "PAUSED"
  
  # 系统内部状态定义（用于任务调度）
  system_internal:
    OFF: "OFF"          # 关机状态
    IDLE: "IDLE"        # 空闲，可接受新任务
    READY: "READY"      # 准备就绪，等待执行任务
    RUNNING: "RUNNING"  # 正在运行任务
    BUSY: "BUSY"        # 忙碌中
    ERROR: "ERROR"      # 错误状态
    STOPPED: "STOPPED"  # 已停止
    PAUSED: "PAUSED"    # 已暂停
    STANDBY: "STANDBY"  # 待机状态
    UNKNOWN: "UNKNOWN"  # 未知状态
  
  # 可用状态定义（这些状态下的机床可以接受任务）
  available_states:
    - "OFF"
    - "IDLE"
    - "STANDBY"
    - "READY"
